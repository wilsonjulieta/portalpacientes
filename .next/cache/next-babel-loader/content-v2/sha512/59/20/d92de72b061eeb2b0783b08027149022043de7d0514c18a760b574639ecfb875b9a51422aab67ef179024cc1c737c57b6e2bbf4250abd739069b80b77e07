{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useState } from \"react\"; // @material-ui/core components\n// layout for this page\n// core components\n\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport { Dialog, DialogContent, List, ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\";\nimport CalendarIcon from '@material-ui/icons/Today';\nimport adminStyles from \"assets/jss/nextjs-material-dashboard/layouts/adminStyle.js\";\nimport useTheme from \"../../hooks/useTheme\";\nimport { fullDateToDayMonth, getFullNameOfDate, getMonthName } from \"../../utils/dates\";\nimport { useMemo } from \"react\";\nimport { parseTurns } from \"../../utils/algorithms\";\nimport { UserContext } from \"../../context/UserContextProvider\";\nimport { MessageDialogContext } from \"../../context/MessageDialogContextProvider\";\nimport { useRouter } from \"next/router\";\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { resetFocus } from \"../../utils/focus\";\nimport { cancelTurn } from \"../../services/turns\";\nimport GLOBAL_GET_TOKEN from \"../../utils/token\";\n\nvar styles = _objectSpread(_objectSpread({}, adminStyles()), {}, {\n  cardCategoryWhite: {\n    color: \"rgba(255,255,255,.62)\",\n    margin: \"0\",\n    fontSize: \"14px\",\n    marginTop: \"0\",\n    marginBottom: \"0\"\n  },\n  cardTitleWhite: {\n    color: \"#FFFFFF\",\n    marginTop: \"0px\",\n    minHeight: \"auto\",\n    fontWeight: \"300\",\n    fontSize: \"22px\",\n    fontFamily: \"'Roboto', 'Helvetica', 'Arial', sans-serif\",\n    marginBottom: \"3px\",\n    textDecoration: \"none\"\n  },\n  description: {\n    fontSize: \"1.25rem\"\n  },\n  colorPrimary: {\n    color: function color(props) {\n      return props.colorPrimary;\n    }\n  }\n});\n\nfunction ConfirmationDialog(_ref) {\n  var open = _ref.open,\n      setOpen = _ref.setOpen,\n      turno = _ref.turno;\n  var classes = useTheme(styles);\n\n  var handleKeys = function handleKeys(event) {\n    if (event.key === \"Enter\") {\n      setOpen(false);\n    }\n\n    if (event.key === \"Escape\") {\n      setOpen(false);\n    }\n  };\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  console.log(user);\n  var messageDialog = useContext(MessageDialogContext);\n  var router = useRouter();\n\n  var handleConfirm = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var id, cancelTurnResponse;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = turno.id;\n              setConfirmEnabled(false);\n              _context.t0 = cancelTurn;\n              _context.t1 = user.consultorioId;\n              _context.next = 6;\n              return GLOBAL_GET_TOKEN();\n\n            case 6:\n              _context.t2 = _context.sent;\n              _context.t3 = id;\n              _context.next = 10;\n              return (0, _context.t0)(_context.t1, _context.t2, _context.t3);\n\n            case 10:\n              cancelTurnResponse = _context.sent;\n              console.log(cancelTurnResponse);\n              setConfirmEnabled(true);\n              setOpen(false);\n\n              if (cancelTurnResponse.success) {\n                _context.next = 19;\n                break;\n              }\n\n              messageDialog.reset();\n              messageDialog.setMessage(cancelTurnResponse.message);\n              messageDialog.open();\n              return _context.abrupt(\"return\");\n\n            case 19:\n              messageDialog.messageOpen(\"Se canceló su turno con éxito.\", \"Cancelación del turno\");\n              router.push(\"/admin/\" + user.consultorioId + \"/dashboard\");\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleConfirm() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n    setTimeout(resetFocus, 0);\n  };\n\n  var _useState = useState(true),\n      confirmEnabled = _useState[0],\n      setConfirmEnabled = _useState[1];\n\n  return /*#__PURE__*/_jsx(Dialog, {\n    open: open,\n    onKeyDown: handleKeys,\n    onClose: handleClose,\n    className: \"solicitarTurnoDialog\",\n    children: /*#__PURE__*/_jsx(DialogContent, {\n      children: /*#__PURE__*/_jsxs(Card, {\n        style: {\n          marginTop: \"10px\",\n          marginBottom: \"10px\"\n        },\n        className: \"proxTurnoCard\",\n        children: [/*#__PURE__*/_jsxs(CardHeader, {\n          className: \"dialogCardHeader\",\n          style: {\n            fontSize: \"1.5rem\",\n            padding: \"8px\",\n            textAlign: \"center\"\n          },\n          color: \"primary\",\n          children: [/*#__PURE__*/_jsx(CancelIcon, {\n            className: \"dialogCardHeader\",\n            style: {\n              fontSize: \"1.5rem\"\n            }\n          }), \" \\xBFDesea cancelar este turno?\"]\n        }), /*#__PURE__*/_jsxs(CardBody, {\n          style: {\n            paddingTop: 0\n          },\n          children: [/*#__PURE__*/_jsxs(List, {\n            children: [/*#__PURE__*/_jsxs(ListItem, {\n              children: [/*#__PURE__*/_jsx(ListItemAvatar, {\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  className: classes.colorPrimary,\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    style: {\n                      fontSize: '20px'\n                    },\n                    children: /*#__PURE__*/_jsx(\"b\", {\n                      children: fullDateToDayMonth(turno.fecha)\n                    })\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '13px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: turno.hora\n                    }), \"hs\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(ListItemText, {\n                primary: /*#__PURE__*/_jsxs(\"label\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Especialidad: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.especialidad\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Lugar de Atenci\\xF3n: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.sucursal\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Fecha: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: getFullNameOfDate(turno.fecha, turno.hora)\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Profesional: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.profesionalNombre\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Motivo: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.practicaNombre\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {})]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"hr\", {})]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-evenly\",\n              marginBottom: \"8px\"\n            },\n            children: [/*#__PURE__*/_jsx(Button, {\n              onClick: handleClose,\n              color: \"secondaryOutlined\",\n              children: \"Cerrar\"\n            }), /*#__PURE__*/_jsx(Button, {\n              onClick: handleConfirm,\n              color: \"primary\",\n              disabled: !confirmEnabled,\n              children: \"Confirmar\"\n            })]\n          })]\n        })]\n      })\n    })\n  });\n}\n\nexport default function ProxTurnos(_ref3) {\n  var nextTurns = _ref3.nextTurns,\n      props = _objectWithoutProperties(_ref3, [\"nextTurns\"]);\n\n  var classes = useTheme(styles);\n  console.log({\n    nextTurns: nextTurns\n  });\n  var nextTurnsParsed = useMemo(function () {\n    return parseTurns(nextTurns);\n  }, [nextTurns]);\n  console.log({\n    nextTurnsParsed: nextTurnsParsed\n  });\n\n  var _useState2 = useState(false),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState({}),\n      turnSelected = _useState3[0],\n      setTurnSelected = _useState3[1];\n\n  var handleOpen = function handleOpen(turn) {\n    setOpen(true);\n    setTurnSelected(turn);\n  };\n\n  console.log(turnSelected);\n  return /*#__PURE__*/_jsxs(GridItem, _objectSpread(_objectSpread({}, props), {}, {\n    classes: {\n      root: \"proxTurnos\"\n    },\n    style: {\n      marginTop: \"5px\"\n    },\n    children: [/*#__PURE__*/_jsxs(Card, {\n      style: {\n        marginBottom: \"5px\"\n      },\n      children: [/*#__PURE__*/_jsx(CardHeader, {\n        color: \"primary\",\n        style: {\n          paddingBlock: \"5px\"\n        },\n        children: /*#__PURE__*/_jsxs(\"h3\", {\n          className: classes.cardTitleWhite,\n          children: [/*#__PURE__*/_jsx(CalendarIcon, {\n            fontSize: \"large\"\n          }), \"Pr\\xF3ximos Turnos\"]\n        })\n      }), /*#__PURE__*/_jsxs(CardBody, {\n        style: {\n          padding: \"0px 20px\"\n        },\n        children: [/*#__PURE__*/_jsx(Card, {\n          style: {\n            marginTop: \"10px\",\n            marginBottom: \"30px\"\n          },\n          className: \"proxTurnoCard\",\n          children: nextTurnsParsed.map(function (month, index) {\n            return /*#__PURE__*/_jsxs(React.Fragment, {\n              children: [/*#__PURE__*/_jsxs(CardHeader, {\n                style: {\n                  paddingTop: \"5px\",\n                  paddingBottom: \"5px\"\n                },\n                color: \"secondary\",\n                children: [getMonthName(month.monthNumber), \" de \", month.yearNumber]\n              }), /*#__PURE__*/_jsx(CardBody, {\n                style: {\n                  paddingTop: 0,\n                  paddingLeft: \"5px\",\n                  marginBottom: \"16px\"\n                },\n                children: month.turns.map(function (turn, index) {\n                  return /*#__PURE__*/_jsxs(List, {\n                    children: [/*#__PURE__*/_jsxs(ListItem, {\n                      children: [/*#__PURE__*/_jsx(ListItemAvatar, {\n                        children: /*#__PURE__*/_jsxs(\"label\", {\n                          className: classes.colorPrimary,\n                          children: [/*#__PURE__*/_jsx(\"label\", {\n                            style: {\n                              fontSize: '20px'\n                            },\n                            children: /*#__PURE__*/_jsx(\"b\", {\n                              children: fullDateToDayMonth(turn.fecha)\n                            })\n                          }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                            style: {\n                              fontSize: '16px'\n                            },\n                            children: [/*#__PURE__*/_jsx(\"b\", {\n                              children: turn.hora\n                            }), \"hs\\xA0\\xA0\\xA0\\xA0\"]\n                          })]\n                        })\n                      }), /*#__PURE__*/_jsx(ListItemText, {\n                        primary: /*#__PURE__*/_jsxs(\"label\", {\n                          className: \"\",\n                          children: [/*#__PURE__*/_jsxs(\"label\", {\n                            style: {\n                              fontSize: '15px'\n                            },\n                            children: [/*#__PURE__*/_jsx(\"b\", {\n                              children: \"Lugar de Atenci\\xF3n: \"\n                            }), /*#__PURE__*/_jsx(\"label\", {\n                              style: {\n                                fontSize: '14px'\n                              },\n                              children: turn.sucursal\n                            })]\n                          }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                            style: {\n                              fontSize: '15px'\n                            },\n                            children: [/*#__PURE__*/_jsx(\"b\", {\n                              children: \"Especialidad: \"\n                            }), /*#__PURE__*/_jsx(\"label\", {\n                              style: {\n                                fontSize: '14px'\n                              },\n                              children: turn.especialidad\n                            })]\n                          }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                            style: {\n                              fontSize: '15px'\n                            },\n                            children: [/*#__PURE__*/_jsx(\"b\", {\n                              children: \"Profesional: \"\n                            }), /*#__PURE__*/_jsx(\"label\", {\n                              style: {\n                                fontSize: '14px'\n                              },\n                              children: turn.profesionalNombre\n                            })]\n                          }), /*#__PURE__*/_jsx(\"br\", {}), turn.practicaNombre && /*#__PURE__*/_jsxs(_Fragment, {\n                            children: [/*#__PURE__*/_jsxs(\"label\", {\n                              style: {\n                                fontSize: '15px'\n                              },\n                              children: [/*#__PURE__*/_jsx(\"b\", {\n                                children: \"Motivo: \"\n                              }), /*#__PURE__*/_jsx(\"label\", {\n                                style: {\n                                  fontSize: '14px'\n                                },\n                                children: turn.practicaNombre\n                              })]\n                            }), /*#__PURE__*/_jsx(\"br\", {})]\n                          })]\n                        })\n                      }), /*#__PURE__*/_jsx(ListItemAvatar, {\n                        children: /*#__PURE__*/_jsx(Button, {\n                          onClick: function onClick() {\n                            return handleOpen(turn);\n                          },\n                          color: \"secondaryOutlined\",\n                          style: {\n                            paddingRight: \"10px\",\n                            paddingLeft: \"10px\"\n                          },\n                          children: \"Cancelar\"\n                        })\n                      })]\n                    }), index === month.turns.length - 1 ? \"\" : /*#__PURE__*/_jsx(\"hr\", {})]\n                  }, turn.id);\n                })\n              })]\n            }, month.monthNumber);\n          })\n        }), nextTurnsParsed.length === 0 ? /*#__PURE__*/_jsx(\"p\", {\n          style: {\n            fontSize: \"24px\"\n          },\n          children: \" Usted no posee turnos agendados. \"\n        }) : \"\"]\n      })]\n    }), /*#__PURE__*/_jsx(ConfirmationDialog, {\n      open: open,\n      onConfirm: function onConfirm() {},\n      message: \"\",\n      setOpen: setOpen,\n      turno: turnSelected\n    })]\n  }));\n}","map":null,"metadata":{},"sourceType":"module"}