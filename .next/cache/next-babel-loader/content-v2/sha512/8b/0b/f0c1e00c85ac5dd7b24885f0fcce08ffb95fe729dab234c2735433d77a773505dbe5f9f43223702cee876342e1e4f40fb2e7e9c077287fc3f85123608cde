{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useRef } from \"react\";\nimport { useRouter } from \"next/router\"; // creates a beautiful scrollbar\n\nimport PerfectScrollbar from \"perfect-scrollbar\";\nimport \"perfect-scrollbar/css/perfect-scrollbar.css\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\"; // core components\n\nimport Navbar from \"components/Navbars/Navbar.js\";\nimport Footer from \"components/Footer/Footer.js\";\nimport Sidebar from \"components/Sidebar/Sidebar.js\";\nimport FixedPlugin from \"components/FixedPlugin/FixedPlugin.js\";\nimport routes from \"routes.js\";\nimport styles from \"assets/jss/nextjs-material-dashboard/layouts/adminStyle.js\";\nimport bgImage from \"assets/img/sidebar.png\";\nimport logo from \"assets/img/hospitallogo.png\";\nimport { UserContext } from \"../context/UserContextProvider\";\nimport { useContext } from \"react\";\nimport { getPatient } from \"../services/userAuth\";\nimport { useEffect } from \"react\";\nlet ps;\nexport default function Admin(_ref) {\n  let {\n    children\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, [\"children\"]);\n\n  //TEMPLATE CODE\n  // used for checking current route\n  const router = useRouter(); // styles\n\n  const useStyles = makeStyles(styles);\n  const classes = useStyles(); // ref to help us initialize PerfectScrollbar on windows devices\n\n  const mainPanel = /*#__PURE__*/React.createRef(); // states and functions\n\n  const [image, setImage] = React.useState(bgImage);\n  const [color, setColor] = React.useState(\"white\");\n  const [fixedClasses, setFixedClasses] = React.useState(\"dropdown show\");\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n\n  const handleImageClick = image => {\n    setImage(image);\n  };\n\n  const handleColorClick = color => {\n    setColor(color);\n  };\n\n  const handleFixedClick = () => {\n    if (fixedClasses === \"dropdown\") {\n      setFixedClasses(\"dropdown show\");\n    } else {\n      setFixedClasses(\"dropdown\");\n    }\n  };\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(prev => !prev);\n    mobileOpenRef.current = !mobileOpenRef.current;\n  };\n\n  const getRoute = () => {\n    return router.pathname !== \"/admin/maps\";\n  };\n\n  const resizeFunction = () => {\n    if (window.innerWidth >= 960) {\n      setMobileOpen(false);\n    }\n  }; // initialize and destroy the PerfectScrollbar plugin\n\n\n  React.useEffect(() => {\n    if (navigator.platform.indexOf(\"Win\") > -1) {\n      ps = new PerfectScrollbar(mainPanel.current, {\n        suppressScrollX: true,\n        suppressScrollY: false\n      });\n      document.body.style.overflow = \"hidden\";\n    }\n\n    window.addEventListener(\"resize\", resizeFunction); // Specify how to clean up after this effect:\n\n    return function cleanup() {\n      if (navigator.platform.indexOf(\"Win\") > -1) {\n        ps.destroy();\n      }\n\n      window.removeEventListener(\"resize\", resizeFunction);\n    };\n  }, [mainPanel]); //FIN TEMPLATE CODE\n  // Close sidebar when changing routes\n\n  useEffect(() => {\n    closeSidebar();\n  }, [router.asPath]);\n  /* Handle sidebar swipes on mobile */\n\n  const closeSidebar = () => {\n    setMobileOpen(false);\n    mobileOpenRef.current = false;\n  };\n\n  const openSidebar = () => {\n    setMobileOpen(true);\n    mobileOpenRef.current = true;\n  };\n\n  const sidebarMoving = useRef(false);\n  const mobileOpenRef = useRef(false);\n  useEffect(() => {\n    const start = e => {\n      if (window.innerWidth >= 960) {\n        return;\n      } // X = 0 a la derecha, ya que el sidebar esta en la derecha\n\n\n      let x = window.innerWidth - e.pageX; // Y = 0 arriba\n\n      const y = e.pageY; // Evito handlear el slider si el start empieza a la altura del boton de abrir sidebar\n\n      if (y < 50) {\n        return;\n      } // console.log(\"start\", { x, y });\n      // Si el sidebar esta cerrado, permito que lo deslice con un margen de 30 px\n\n\n      if (!mobileOpenRef.current && x > 30) {\n        return;\n      } // Si el sidebar esta abierto, permito que lo deslice con un margen de 20 px\n\n\n      if (mobileOpenRef.current && (x > 295 || x < 275)) {\n        return;\n      }\n\n      if (x > 280) {\n        x = 280;\n      } // Abro el sidebar si no lo estaba\n\n\n      if (!mobileOpenRef.current) {\n        openSidebar();\n      }\n\n      const sidebar = document.querySelector(\".sidebar\");\n      sidebar.style.setProperty(\"pointer-events\", `none`, \"important\");\n      sidebar.style.setProperty(\"transform\", `translate3d(${280 - x}px, 0, 0)`, \"important\");\n      sidebarMoving.current = true;\n    };\n\n    const move = e => {\n      var _ref2, _e$pageX, _e$changedTouches, _e$changedTouches$;\n\n      if (window.innerWidth >= 960) {\n        return;\n      }\n\n      if (!sidebarMoving.current) return;\n      const sidebar = document.querySelector(\".sidebar\");\n      let x = window.innerWidth - ((_ref2 = (_e$pageX = e.pageX) !== null && _e$pageX !== void 0 ? _e$pageX : (_e$changedTouches = e.changedTouches) === null || _e$changedTouches === void 0 ? void 0 : (_e$changedTouches$ = _e$changedTouches[0]) === null || _e$changedTouches$ === void 0 ? void 0 : _e$changedTouches$.pageX) !== null && _ref2 !== void 0 ? _ref2 : 0); // console.log(\"move\", x);\n\n      if (x > 280) {\n        x = 280;\n      }\n\n      e.preventDefault();\n      sidebar.style.setProperty(\"transform\", `translate3d(${280 - x}px, 0, 0)`, \"important\");\n      sidebar.style.setProperty(\"transition\", `all 0s`, \"important\");\n    };\n\n    const end = e => {\n      if (window.innerWidth >= 960) {\n        return;\n      }\n\n      if (!sidebarMoving.current) {\n        return;\n      }\n\n      sidebarMoving.current = false;\n      const x = window.innerWidth - e.pageX; // console.log(\"end\", x);\n\n      const sidebar = document.querySelector(\".sidebar\");\n      setTimeout(() => {\n        sidebar.style.setProperty(\"pointer-events\", `all`, \"important\");\n      }, 100);\n\n      if (x < 100) {\n        closeSidebar();\n      } else {\n        sidebar.style.setProperty(\"transform\", `translate3d(${0}px, 0, 0)`, \"important\");\n        sidebar.style.setProperty(\"transition\", `transform 225ms cubic-bezier(0, 0, 0.2, 1) 0ms`, \"important\");\n      }\n    };\n\n    document.addEventListener('pointerdown', start);\n    document.addEventListener('pointermove', move, {\n      passive: false\n    });\n    document.addEventListener('touchmove', move, {\n      passive: false\n    });\n    document.addEventListener('pointerup', end);\n    return () => {\n      document.removeEventListener('pointerdown', start);\n      document.removeEventListener('pointermove', move);\n      document.removeEventListener('touchmove', move);\n      document.removeEventListener('pointerup', end);\n    };\n  }, []);\n  /* Handle sidebar swipes on mobile */\n\n  /* Handle scroll to top on route change */\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (typeof mainPanel.current === 'object' && mainPanel.current !== null) {\n        mainPanel.current.scrollTop = 0;\n      } else {\n        window.scrollY = 0; // window.scrollTo(0, 0);\n      }\n    }, 2000);\n  }, [router.asPath]);\n  /* Handle scroll to top on route change */\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classes.wrapper,\n    children: [/*#__PURE__*/_jsx(Sidebar, _objectSpread({\n      routes: routes,\n      logoText: \"PORTAL PACIENTES\",\n      logo: logo,\n      image: image,\n      handleDrawerToggle: closeSidebar,\n      open: mobileOpen,\n      color: color\n    }, rest)), /*#__PURE__*/_jsxs(\"div\", {\n      className: classes.mainPanel,\n      ref: mainPanel,\n      children: [/*#__PURE__*/_jsx(Navbar, _objectSpread({\n        routes: routes,\n        handleDrawerToggle: handleDrawerToggle\n      }, rest)), getRoute() ? /*#__PURE__*/_jsx(\"div\", {\n        className: classes.content,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: classes.container,\n          children: children\n        })\n      }) : /*#__PURE__*/_jsx(\"div\", {\n        className: classes.map,\n        children: children\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}