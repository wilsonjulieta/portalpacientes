{"ast":null,"code":"import URL from \"../constants/URL\";\nimport { POST } from \"./FETCH.JS\";\nimport { getToken } from \"./FETCH.JS\";\nimport { GET } from \"./FETCH.JS\";\nexport async function logIn(tipodoc, username, password, consultorioId) {\n  let loginResponse;\n\n  try {\n    const token = await getToken(); //Si no hay token se va al catch directamente\n\n    const response = await POST(consultorioId, token, \"patients/login\", {\n      tipodoc: Number(tipodoc),\n      dni: Number(username),\n      password,\n      email: \"\"\n    });\n    if (response.status !== 200) //Si falla el login se va al catch directamente\n      throw Error(\"Ocurrió un error en el servidor. Intente nuevamente.\");\n    const data = await response.json(); //Si falla al pedir los datos del paciente va al catch\n\n    if (data.registrado === false) {\n      throw Error(\"Sus datos están cargados pero no se encuentra registrado. Ingrese a \\\"registrarse\\\".\");\n    }\n\n    if (data.id === 0) {\n      throw Error(\"Nombre de usuario o contraseña incorrectos\");\n    }\n\n    loginResponse = {\n      loggedIn: true,\n      data,\n      token\n    };\n  } catch (err) {\n    loginResponse = {\n      loggedIn: false,\n      message: err.message\n    };\n  }\n\n  console.dir({\n    loginResponse\n  });\n  return loginResponse;\n}\nexport async function getPatient(id, consultorioId, token) {\n  let patientResponse;\n\n  try {\n    const r3 = await GET(consultorioId, token, \"patients/\" + id);\n\n    if (r3.status != 200) {\n      throw new Error();\n    }\n\n    const data = await r3.json(); //Si falla al pedir los datos del paciente va al catch\n\n    patientResponse = {\n      success: true,\n      data\n    };\n  } catch (err) {\n    patientResponse = {\n      success: false\n    };\n  }\n\n  return patientResponse;\n}","map":null,"metadata":{},"sourceType":"module"}