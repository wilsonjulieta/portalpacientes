{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport nookies, { parseCookies } from 'nookies';\nimport { getToken } from '../services/FETCH.JS'; // Si el token esta seteado, lo devuelve dependiendo el contexto (En session desde el cliente, en cookies desde el servidor.)\n\nexport default function GLOBAL_GET_TOKEN(_x) {\n  return _GLOBAL_GET_TOKEN.apply(this, arguments);\n}\n\nfunction _GLOBAL_GET_TOKEN() {\n  _GLOBAL_GET_TOKEN = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var cookies, _cookies, token;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!true) {\n              _context.next = 5;\n              break;\n            }\n\n            // Client-side-only code\n            cookies = parseCookies();\n            return _context.abrupt(\"return\", cookies.token);\n\n          case 5:\n            // Server-side-only code\n            // throw Error();\n            _cookies = nookies.get(ctx);\n            _context.prev = 6;\n            _context.next = 9;\n            return getToken(_cookies.consultorioId);\n\n          case 9:\n            token = _context.sent;\n            nookies.set(ctx, 'token', token, {\n              maxAge: 24 * 60 * 60,\n              path: '/'\n            });\n            return _context.abrupt(\"return\", token);\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](6);\n            return _context.abrupt(\"return\", \"\");\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 14]]);\n  }));\n  return _GLOBAL_GET_TOKEN.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module"}