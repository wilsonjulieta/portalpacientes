{"ast":null,"code":"import nookies, { parseCookies } from 'nookies';\nimport { getToken } from '../services/FETCH.JS'; // Si el token esta seteado, lo devuelve dependiendo el contexto (En session desde el cliente, en cookies desde el servidor.)\n\nexport default async function GLOBAL_GET_TOKEN(ctx) {\n  if (false) {\n    // Client-side-only code\n    const cookies = parseCookies();\n    return cookies.token;\n  } else {\n    // Server-side-only code\n    // throw Error();\n    const cookies = nookies.get(ctx);\n\n    try {\n      const token = await getToken(cookies.consultorioId);\n      nookies.set(ctx, 'token', token, {\n        maxAge: 24 * 60 * 60,\n        path: '/'\n      });\n      return token;\n    } catch (error) {\n      return \"\";\n    }\n  }\n}","map":null,"metadata":{},"sourceType":"module"}