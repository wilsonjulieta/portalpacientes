{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\DATOS\\\\THISYS\\\\SISTEMA\\\\PORTAL WEB\\\\Proyecto-Salud\\\\pages\\\\login\\\\[consultorioId].js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from \"react\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputLabel from \"@material-ui/core/InputLabel\"; // layout for this page\n\nimport Admin from \"layouts/Admin.js\"; // core components\n\nimport GridItem from \"components/Grid/GridItem.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardAvatar from \"components/Card/CardAvatar.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport CardFooter from \"components/Card/CardFooter.js\";\nimport avatar from \"assets/img/faces/marc.jpg\";\nimport Login from \"../../layouts/Login\";\nimport { FormControl, FormGroup, MenuItem, NativeSelect, Select, TextField } from \"@material-ui/core\";\nimport styles from \"assets/jss/nextjs-material-dashboard/layouts/loginStyle.js\";\nimport { ThemeContext } from \"../../context/ThemeContextProvider\";\nimport { useRouter } from \"next/router\";\nimport THEMES from \"../../constants/THEMES\";\nimport { logIn } from \"../../services/userAuth.js\";\nimport { UserContext } from \"../../context/UserContextProvider\";\nimport useTheme from \"../../hooks/useTheme\";\nimport CustomPasswordInput from \"../../components/CustomInput/CustomPasswordInput\";\nimport { setCookie } from \"nookies\";\nimport { hideLoad, showLoad } from \"../../utils/loading\";\n\nfunction LoginView({\n  consultorioId\n}) {\n  _s();\n\n  const router = useRouter();\n  const path = \"Inicio\";\n  const classes = useTheme(styles);\n  const {\n    0: errorMsg,\n    1: setErrorMsg\n  } = useState(\"\");\n  const {\n    setUser\n  } = useContext(UserContext);\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const tipoDoc = formData.get(\"tipodoc\");\n    const username = formData.get(\"username\");\n    const password = formData.get(\"password\");\n    showLoad(path);\n    let loginResponse = {};\n\n    try {\n      loginResponse = await logIn(tipoDoc, username, password, consultorioId);\n    } catch (error) {} finally {}\n\n    console.log(loginResponse); // loginResponse = {message: \"Sus datos estÃ¡n cargados pero no se encuentra registrado. Ingrese a \\\"registrarse\\\".\"}\n\n    if (loginResponse.loggedIn) {\n      sessionStorage.setItem(\"id\", loginResponse.data.id);\n      sessionStorage.setItem(\"token\", loginResponse.token);\n      setCookie(null, 'id', loginResponse.data.id, {\n        maxAge: 50 * 365 * 24 * 60 * 60,\n        path: '/'\n      });\n      setCookie(null, 'token', loginResponse.token, {\n        maxAge: 24 * 60 * 60,\n        path: '/'\n      });\n      setUser(loginResponse.data);\n      router.push(\"/admin/\" + consultorioId + \"/dashboard\");\n      return true;\n    } else {\n      sessionStorage.clear();\n      hideLoad(path);\n      setErrorMsg(loginResponse.message);\n      return false;\n    }\n  };\n\n  const handleRegisterRedirect = () => {\n    const currentPath = router.asPath; // get the current URL path\n\n    router.push(currentPath + \"/register\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    method: \"post\",\n    action: \"/admin/dashboard\",\n    onSubmit: handleSubmit,\n    autoComplete: \"on\",\n    children: /*#__PURE__*/_jsxDEV(GridContainer, {\n      style: {\n        width: \"100%\",\n        height: \"80vh\",\n        alignItems: \"center\"\n      },\n      justify: \"center\",\n      children: /*#__PURE__*/_jsxDEV(GridItem, {\n        xs: 12,\n        sm: 10,\n        md: 7,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            color: \"primary\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: classes.cardTitleWhite,\n              children: \"Bienvenido\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: classes.cardCategoryWhite,\n              children: \"Complete sus datos de ingreso\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n            children: /*#__PURE__*/_jsxDEV(GridContainer, {\n              children: [/*#__PURE__*/_jsxDEV(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 12,\n                children: /*#__PURE__*/_jsxDEV(FormControl, {\n                  fullWidth: true,\n                  children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                    className: classes.label,\n                    variant: \"standard\",\n                    htmlFor: \"uncontrolled-native\",\n                    children: \"Tipo de Documento\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Select, {\n                    className: classes.select,\n                    classes: {\n                      root: classes.selectRoot\n                    },\n                    defaultValue: 1,\n                    inputProps: {\n                      name: 'tipodoc',\n                      id: 'uncontrolled-native',\n                      required: true,\n                      onChange: () => setErrorMsg(false)\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: 1,\n                      selected: true,\n                      children: \"DNI\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: 2,\n                      children: \"CI\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n                      value: 3,\n                      children: \"Pasaporte\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 12,\n                children: /*#__PURE__*/_jsxDEV(CustomInput, {\n                  labelText: \"Nro. de Documento\",\n                  id: \"username\",\n                  formControlProps: {\n                    fullWidth: true\n                  },\n                  inputProps: {\n                    name: 'username',\n                    id: \"username\",\n                    type: \"number\",\n                    required: true,\n                    autoComplete: \"username\",\n                    onChange: () => setErrorMsg(false)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n                xs: 12,\n                sm: 12,\n                md: 12,\n                children: /*#__PURE__*/_jsxDEV(CustomPasswordInput, {\n                  labelText: \"Contrase\\xF1a\",\n                  inputName: \"password\",\n                  handleChangeHook: () => setErrorMsg(false)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(GridItem, {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: errorMsg ? \"red\" : \"transparent\",\n                    margin: \"0\",\n                    transition: \"all 0.6s\",\n                    userSelect: \"none\"\n                  },\n                  children: errorMsg ? errorMsg : \"Sus datos estan cargados pero no se encuentra registrado. Ingrese a \\\"registrarse\\\".\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n            style: {\n              paddingTop: \"0\",\n              flexWrap: \"wrap\",\n              rowGap: \"10px\",\n              justifyContent: \"center\",\n              paddingInline: \"18px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: \"1 0 33.33%\",\n                textAlign: \"left\"\n              },\n              className: \"botonLoginRegistro\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: handleRegisterRedirect,\n                type: \"button\",\n                color: \"primaryOutlined\",\n                style: {\n                  padding: \"15px 6px\"\n                },\n                children: \"Registrarse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: \"1 0 33.33%\",\n                textAlign: \"center\"\n              },\n              className: \"botonLoginIngreso\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                color: \"primary\",\n                style: {\n                  fontSize: \"1.35em\"\n                },\n                children: \"Ingresar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                flex: \"1 0 33.33%\",\n                textAlign: \"right\"\n              },\n              className: \"botonLoginOlvido\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                type: \"button\",\n                color: \"secondarySimple\",\n                style: {\n                  padding: \"15px 6px\"\n                },\n                children: \"Olvid\\xE9 mi contrase\\xF1a\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginView, \"cMZOcWuJcGQ6Z/e6tjs94eU12SA=\", false, function () {\n  return [useRouter, useTheme];\n});\n\n_c = LoginView;\nLoginView.layout = Login;\nexport var __N_SSP = true;\nexport default LoginView;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginView\");","map":{"version":3,"sources":["C:/DATOS/THISYS/SISTEMA/PORTAL WEB/Proyecto-Salud/pages/login/[consultorioId].js"],"names":["React","useContext","useEffect","useState","makeStyles","InputLabel","Admin","GridItem","GridContainer","CustomInput","Button","Card","CardHeader","CardAvatar","CardBody","CardFooter","avatar","Login","FormControl","FormGroup","MenuItem","NativeSelect","Select","TextField","styles","ThemeContext","useRouter","THEMES","logIn","UserContext","useTheme","CustomPasswordInput","setCookie","hideLoad","showLoad","LoginView","consultorioId","router","path","classes","errorMsg","setErrorMsg","setUser","handleSubmit","event","preventDefault","formData","FormData","target","tipoDoc","get","username","password","loginResponse","error","console","log","loggedIn","sessionStorage","setItem","data","id","token","maxAge","push","clear","message","handleRegisterRedirect","currentPath","asPath","width","height","alignItems","cardTitleWhite","cardCategoryWhite","label","select","root","selectRoot","name","required","onChange","fullWidth","type","autoComplete","color","margin","transition","userSelect","paddingTop","flexWrap","rowGap","justifyContent","paddingInline","flex","textAlign","padding","fontSize","layout"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\n// @material-ui/core components\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\n// layout for this page\r\nimport Admin from \"layouts/Admin.js\";\r\n// core components\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\r\nimport Button from \"components/CustomButtons/Button.js\";\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardHeader from \"components/Card/CardHeader.js\";\r\nimport CardAvatar from \"components/Card/CardAvatar.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\nimport CardFooter from \"components/Card/CardFooter.js\";\r\n\r\nimport avatar from \"assets/img/faces/marc.jpg\";\r\nimport Login from \"../../layouts/Login\";\r\nimport { FormControl, FormGroup, MenuItem, NativeSelect, Select, TextField } from \"@material-ui/core\";\r\n\r\nimport styles from \"assets/jss/nextjs-material-dashboard/layouts/loginStyle.js\";\r\nimport { ThemeContext } from \"../../context/ThemeContextProvider\";\r\nimport { useRouter } from \"next/router\";\r\nimport THEMES from \"../../constants/THEMES\";\r\nimport { logIn } from \"../../services/userAuth.js\";\r\nimport { UserContext } from \"../../context/UserContextProvider\";\r\nimport useTheme from \"../../hooks/useTheme\";\r\nimport CustomPasswordInput from \"../../components/CustomInput/CustomPasswordInput\";\r\nimport { setCookie } from \"nookies\";\r\nimport { hideLoad, showLoad } from \"../../utils/loading\";\r\n\r\nexport async function getServerSideProps(context) {\r\n  const { consultorioId } = context.query;\r\n\r\n  return { props: { consultorioId } };\r\n}\r\n\r\nfunction LoginView({ consultorioId }) {\r\n\r\n  const router = useRouter();\r\n\r\n  const path = \"Inicio\";\r\n\r\n  const classes = useTheme(styles);\r\n\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n\r\n  const { setUser } = useContext(UserContext);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const formData = new FormData(event.target);\r\n\r\n    const tipoDoc = formData.get(\"tipodoc\");\r\n    const username = formData.get(\"username\");\r\n    const password = formData.get(\"password\");\r\n\r\n    showLoad(path);\r\n\r\n    let loginResponse = {};\r\n\r\n    try {\r\n      loginResponse = await logIn(tipoDoc, username, password, consultorioId);\r\n    } catch (error) {\r\n\r\n    } finally {\r\n\r\n    }\r\n\r\n    console.log(loginResponse);\r\n\r\n    // loginResponse = {message: \"Sus datos estÃ¡n cargados pero no se encuentra registrado. Ingrese a \\\"registrarse\\\".\"}\r\n\r\n    if (loginResponse.loggedIn) {\r\n      sessionStorage.setItem(\"id\", loginResponse.data.id);\r\n      sessionStorage.setItem(\"token\", loginResponse.token);\r\n\r\n      setCookie(null, 'id', loginResponse.data.id, {\r\n        maxAge: 50 * 365 * 24 * 60 * 60,\r\n        path: '/',\r\n      });\r\n\r\n      setCookie(null, 'token', loginResponse.token, {\r\n        maxAge: 24 * 60 * 60,\r\n        path: '/',\r\n      });\r\n\r\n      setUser(loginResponse.data);\r\n\r\n      router.push(\"/admin/\" + consultorioId + \"/dashboard\");\r\n      return true\r\n    }\r\n    else {\r\n      sessionStorage.clear();\r\n      hideLoad(path);\r\n      setErrorMsg(loginResponse.message);\r\n\r\n      return false\r\n    }\r\n  }\r\n\r\n  const handleRegisterRedirect = () => {\r\n    const currentPath = router.asPath; // get the current URL path\r\n\r\n    router.push(currentPath + \"/register\")\r\n  }\r\n\r\n  return (\r\n    <form method=\"post\" action=\"/admin/dashboard\" onSubmit={handleSubmit} autoComplete=\"on\">\r\n      <GridContainer style={{ width: \"100%\", height: \"80vh\", alignItems: \"center\" }} justify=\"center\">\r\n        <GridItem xs={12} sm={10} md={7}>\r\n          <Card>\r\n            <CardHeader color=\"primary\">\r\n              <h4 className={classes.cardTitleWhite}>Bienvenido</h4>\r\n              <p className={classes.cardCategoryWhite}>Complete sus datos de ingreso</p>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <GridContainer>\r\n                <GridItem xs={12} sm={12} md={12}>\r\n                  <FormControl fullWidth>\r\n                    <InputLabel className={classes.label} variant=\"standard\" htmlFor=\"uncontrolled-native\">\r\n                      Tipo de Documento\r\n                    </InputLabel>\r\n                    <Select\r\n                      className={classes.select}\r\n                      classes={{ root: classes.selectRoot }}\r\n                      defaultValue={1}\r\n                      inputProps={{\r\n                        name: 'tipodoc',\r\n                        id: 'uncontrolled-native',\r\n                        required: true,\r\n                        onChange: () => setErrorMsg(false)\r\n                      }}\r\n                    >\r\n                      <MenuItem value={1} selected>DNI</MenuItem>\r\n                      <MenuItem value={2}>CI</MenuItem>\r\n                      <MenuItem value={3}>Pasaporte</MenuItem>\r\n                    </Select>\r\n                  </FormControl>\r\n                </GridItem>\r\n                <GridItem xs={12} sm={12} md={12}>\r\n                  <CustomInput\r\n                    labelText=\"Nro. de Documento\"\r\n                    id=\"username\"\r\n                    formControlProps={{\r\n                      fullWidth: true,\r\n                    }}\r\n                    inputProps={{\r\n                      name: 'username',\r\n                      id: \"username\",\r\n                      type:\"number\",\r\n                      required: true,\r\n                      autoComplete: \"username\",\r\n                      onChange: () => setErrorMsg(false)\r\n                    }}\r\n                  />\r\n                </GridItem>\r\n                <GridItem xs={12} sm={12} md={12}>\r\n                  <CustomPasswordInput\r\n                    labelText=\"ContraseÃ±a\"\r\n                    inputName=\"password\"\r\n                    handleChangeHook={() => setErrorMsg(false)}\r\n                  />\r\n                </GridItem>\r\n                <GridItem>\r\n                  <p style={{ color: errorMsg ? \"red\" : \"transparent\", margin: \"0\", transition: \"all 0.6s\", userSelect: \"none\" }}>\r\n                    {errorMsg ? errorMsg : \"Sus datos estan cargados pero no se encuentra registrado. Ingrese a \\\"registrarse\\\".\"}\r\n                  </p>\r\n                </GridItem>\r\n              </GridContainer>\r\n            </CardBody>\r\n            <CardFooter style={{ paddingTop: \"0\", flexWrap: \"wrap\", rowGap: \"10px\", justifyContent: \"center\", paddingInline: \"18px\" }}>\r\n              <div style={{ flex: \"1 0 33.33%\", textAlign: \"left\" }} className=\"botonLoginRegistro\" >\r\n                <Button onClick={handleRegisterRedirect} type=\"button\" color=\"primaryOutlined\" style={{ padding: \"15px 6px\" }}>Registrarse</Button>\r\n              </div>\r\n              <div style={{ flex: \"1 0 33.33%\", textAlign: \"center\" }} className=\"botonLoginIngreso\">\r\n                <Button type=\"submit\" color=\"primary\" style={{ fontSize: \"1.35em\" }}>Ingresar</Button>\r\n              </div>\r\n              <div style={{ flex: \"1 0 33.33%\", textAlign: \"right\" }} className=\"botonLoginOlvido\">\r\n                <Button type=\"button\" color=\"secondarySimple\" style={{ padding: \"15px 6px\" }}>Olvid&eacute; mi contraseÃ±a</Button>\r\n              </div>\r\n            </CardFooter>\r\n          </Card>\r\n        </GridItem>\r\n      </GridContainer>\r\n    </form>\r\n  );\r\n}\r\n\r\nLoginView.layout = Login;\r\n\r\nexport default LoginView;\r\n"]},"metadata":{},"sourceType":"module"}