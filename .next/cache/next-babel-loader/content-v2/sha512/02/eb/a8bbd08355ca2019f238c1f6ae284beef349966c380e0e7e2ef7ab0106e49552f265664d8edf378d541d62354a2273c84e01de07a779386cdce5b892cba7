{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\"; // @material-ui/core components\n// layout for this page\n\nimport Admin from \"layouts/Admin.js\"; // core components\n\nimport GridItem from \"components/Grid/GridItem.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport avatar from \"assets/img/placeholderPic.jpg\";\nimport { Dialog, DialogContent, List, ListItem, ListItemAvatar, ListItemText } from \"@material-ui/core\";\nimport useTheme from \"../../../hooks/useTheme\";\nimport CalendarIcon from '@material-ui/icons/Today';\nimport AddIcon from '@material-ui/icons/Add';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport adminStyles from \"assets/jss/nextjs-material-dashboard/layouts/adminStyle.js\";\nimport { useEffect } from \"react\";\nimport { TURNOS_DISPONIBLES } from \"../../../utils/mockData\";\nimport { useRef } from \"react\";\nimport { resetFocus } from \"../../../utils/focus\";\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ProxTurnos from \"../../../components/ProxTurnos/ProxTurnos\";\nimport ShortcutIcon from '@material-ui/icons/RotateRight';\nimport Link from \"next/dist/client/link\";\nimport { useRouter } from \"next/router\";\nimport HistorialTurnos from \"../../../components/HistorialTurnos.js/HistorialTurnos\";\nimport nookies from 'nookies';\nimport { getNextTurns, getTurnsHistory } from \"../../../services/turns\";\nimport GLOBAL_GET_TOKEN from \"../../../utils/token\";\n\nconst styles = _objectSpread(_objectSpread({}, adminStyles()), {}, {\n  cardCategoryWhite: {\n    color: \"rgba(255,255,255,.62)\",\n    margin: \"0\",\n    fontSize: \"14px\",\n    marginTop: \"0\",\n    marginBottom: \"0\"\n  },\n  cardTitleWhite: {\n    color: \"#FFFFFF\",\n    marginTop: \"0px\",\n    minHeight: \"auto\",\n    fontWeight: \"300\",\n    fontFamily: \"'Roboto', 'Helvetica', 'Arial', sans-serif\",\n    marginBottom: \"3px\",\n    textDecoration: \"none\"\n  },\n  description: {\n    fontSize: \"1.25rem\"\n  },\n  colorPrimary: {\n    color: props => props.colorPrimary\n  },\n  profesionalImg: {\n    width: \"20%\",\n    border: props => \"1px solid \" + props.colorPrimary,\n    borderRadius: \"100%\"\n  }\n});\n\nexport async function getServerSideProps(context) {\n  const {\n    consultorioId\n  } = context.query;\n  const cookies = nookies.get(context);\n  const nextTurnsResponse = await getNextTurns(cookies.id, consultorioId, await GLOBAL_GET_TOKEN(context));\n  const turnsHistoryResponse = await getTurnsHistory(consultorioId, await GLOBAL_GET_TOKEN(context), cookies.id);\n\n  if (!nextTurnsResponse.success || !turnsHistoryResponse.success) {\n    return {\n      redirect: {\n        destination: '/login/' + consultorioId + \"/server-error\",\n        permanent: false\n      }\n    };\n  }\n\n  return {\n    props: {\n      consultorioId,\n      nextTurns: nextTurnsResponse.data,\n      turnsHistory: turnsHistoryResponse.data\n    }\n  };\n}\n\nfunction GestionTurnos({\n  especialidadesInit,\n  nextTurns,\n  turnsHistory\n}) {\n  const classes = useTheme(styles);\n  const {\n    0: especialidades,\n    1: setEspecialidades\n  } = useState([]);\n  const {\n    0: especialidad,\n    1: setEspecialidad\n  } = useState(\"\");\n  const {\n    0: lugar,\n    1: setLugar\n  } = useState(\"\");\n  const {\n    0: profesional,\n    1: setProfesional\n  } = useState(\"\");\n  const {\n    0: turnos,\n    1: setTurnos\n  } = useState(TURNOS_DISPONIBLES);\n\n  const handleChange = event => {};\n\n  const router = useRouter();\n  const {\n    consultorioId\n  } = router.query;\n  useEffect(() => {\n    setEspecialidades([{\n      value: 1,\n      name: \"Especialidad 1\"\n    }, {\n      value: 2,\n      name: \"Especialidad 2\"\n    }, {\n      value: 3,\n      name: \"Especialidad 3\"\n    }]);\n  }, []);\n  /* DIALOG VERIFICACION */\n\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n\n  const handleClose = () => {// Do something when the dialog is closed\n  };\n\n  const handleCancel = () => {\n    setOpen(false);\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n  /* DIALOG VERIFICACION */\n\n\n  const {\n    0: turnoSeleccionado,\n    1: setTurnoSeleccionado\n  } = useState({});\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(GridContainer, {\n      style: {\n        marginBottom: \"50px\"\n      },\n      children: [/*#__PURE__*/_jsx(ProxTurnos, {\n        nextTurns: nextTurns,\n        xs: 12,\n        sm: 12,\n        md: 8,\n        lg: 9,\n        xl: 10\n      }), /*#__PURE__*/_jsx(GridItem, {\n        xs: 12,\n        sm: 12,\n        md: 4,\n        lg: 3,\n        xl: 2,\n        order: 1,\n        className: \"gestionSolicitarTurnosWrapper\",\n        children: /*#__PURE__*/_jsxs(Card, {\n          profile: true,\n          style: {\n            marginBlock: \"15px\"\n          },\n          children: [/*#__PURE__*/_jsx(CardHeader, {\n            color: \"secondary\",\n            style: {\n              padding: \"0\"\n            },\n            children: /*#__PURE__*/_jsx(\"h3\", {\n              className: classes.cardTitleWhite,\n              children: /*#__PURE__*/_jsx(ShortcutIcon, {\n                fontSize: \"large\",\n                style: {\n                  verticalAlign: \"bottom\"\n                }\n              })\n            })\n          }), /*#__PURE__*/_jsx(CardBody, {\n            style: {\n              paddingInline: \"0\",\n              paddingBlock: \"30px\"\n            },\n            children: /*#__PURE__*/_jsx(\"div\", {\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"space-evenly\",\n                flexWrap: \"wrap\",\n                paddingInline: \"6px\"\n              },\n              children: /*#__PURE__*/_jsx(Link, {\n                passHref: true,\n                href: {\n                  pathname: '/admin/[consultorioId]/solicitarTurno',\n                  query: {\n                    consultorioId\n                  }\n                },\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  style: {\n                    width: \"100%\"\n                  },\n                  children: /*#__PURE__*/_jsxs(Button, {\n                    color: \"primary\",\n                    style: {\n                      fontSize: \"1.25em\",\n                      width: \"100%\"\n                    },\n                    children: [/*#__PURE__*/_jsx(AddIcon, {\n                      style: {\n                        fontSize: \"1.25em\"\n                      }\n                    }), \"Solicitar Turno\"]\n                  })\n                })\n              })\n            })\n          })]\n        })\n      }), /*#__PURE__*/_jsx(HistorialTurnos, {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 12,\n        xl: 12,\n        turnsHistory: turnsHistory\n      })]\n    }), /*#__PURE__*/_jsx(ConfirmationDialog, {\n      open: open,\n      onConfirm: () => {},\n      message: \"hola\",\n      setOpen: setOpen,\n      turno: turnoSeleccionado\n    })]\n  });\n}\n\nfunction TurnosDisponibles({\n  turnosLugar,\n  setOpen,\n  setTurnoSeleccionado\n}) {\n  const classes = useTheme(styles);\n  const {\n    lugar,\n    turnos\n  } = turnosLugar;\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Card, {\n      style: {\n        marginTop: \"10px\",\n        marginBottom: \"10px\"\n      },\n      className: \"proxTurnoCard\",\n      children: /*#__PURE__*/_jsxs(CardHeader, {\n        style: {\n          paddingTop: \"4px\",\n          paddingBottom: \"4px\"\n        },\n        color: \"secondary\",\n        children: [/*#__PURE__*/_jsx(PlaceIcon, {}), \" Lugar de atenci\\xF3n: \", /*#__PURE__*/_jsx(\"b\", {\n          children: lugar\n        })]\n      })\n    }), /*#__PURE__*/_jsx(GridContainer, {\n      style: {\n        margin: \"-10px -16px\"\n      },\n      children: turnos.map((turno, index) => /*#__PURE__*/_jsx(GridItem, {\n        style: {\n          padding: \"8px 16px\",\n          marginTop: \"24px\"\n        },\n        xs: 12,\n        sm: 12,\n        md: 12,\n        lg: 6,\n        xl: 4,\n        children: /*#__PURE__*/_jsxs(Card, {\n          style: {\n            margin: 0\n          },\n          className: \"solicitarTurnoCard\",\n          children: [/*#__PURE__*/_jsx(CardHeader, {\n            style: {\n              paddingTop: \"2px\",\n              paddingBottom: \"2px\",\n              paddingInline: \"0\"\n            },\n            color: \"primary\",\n            children: /*#__PURE__*/_jsxs(\"h3\", {\n              className: \"\",\n              style: {\n                fontSize: '24px',\n                margin: \"auto\",\n                display: \"block\",\n                textAlign: \"center\"\n              },\n              children: [/*#__PURE__*/_jsx(CalendarIcon, {\n                style: {\n                  fontSize: '30px'\n                }\n              }), \"\\xA0\", turno.fecha]\n            })\n          }), /*#__PURE__*/_jsxs(CardBody, {\n            style: {\n              paddingBlock: \"8px\",\n              paddingInline: \"16px\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"start\"\n            },\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              className: classes.profesionalImg,\n              src: avatar,\n              alt: \"...\"\n            }), /*#__PURE__*/_jsxs(\"label\", {\n              style: {\n                fontSize: '24px',\n                width: \"60%\",\n                textAlign: \"left\",\n                paddingInline: \"6px\",\n                display: \"block\"\n              },\n              children: [\" \", turno.profesional]\n            }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n              color: \"primary\",\n              style: {\n                paddingRight: \"10px\",\n                paddingLeft: \"10px\",\n                margin: \"auto\",\n                display: \"block\",\n                width: \"20%\",\n                borderRadius: \"2rem\",\n                minWidth: \"80px\"\n              },\n              size: \"small\",\n              onClick: () => {\n                setOpen(true);\n                setTurnoSeleccionado(turno);\n              },\n              children: \"Solicitar\"\n            })]\n          })]\n        })\n      }))\n    })]\n  });\n}\n\nfunction ConfirmationDialog({\n  open,\n  setOpen,\n  onConfirm,\n  setActiveStep,\n  turno\n}) {\n  const classes = useTheme(styles);\n  const {\n    0: resendDisabled,\n    1: setResendDisabled\n  } = useState(false);\n  const {\n    0: codeDisabled,\n    1: setCodeDisabled\n  } = useState(false);\n  const {\n    0: code,\n    1: setCode\n  } = useState(\"\");\n  const {\n    0: codeState,\n    1: setCodeState\n  } = useState(\"\");\n  const confirmRef = useRef();\n\n  const handleCancel = () => {\n    onClose();\n  };\n\n  const handleKeys = event => {\n    if (event.key === \"Enter\") {\n      handleConfirm();\n    }\n\n    if (event.key === \"Escape\") {\n      setOpen(false);\n    }\n  };\n\n  const handleConfirm = () => {// if (document.getElementById(\"verifInput\").reportValidity()) {\n    //   setCodeDisabled(true);\n    //   setCodeState(\"Success\");\n    //   setTimeout(() => {\n    //     setActiveStep(prev => prev + 1);\n    //     setOpen(false)\n    //   }, 1500);\n    // }\n    // else {\n    //   setCodeState(\"Error\");\n    // }\n  };\n\n  const handleResend = () => {\n    setResendDisabled(true);\n    setTimeout(() => {\n      setResendDisabled(false);\n    }, 3000);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setTimeout(resetFocus, 0);\n  };\n\n  return /*#__PURE__*/_jsx(Dialog, {\n    open: open,\n    onKeyDown: handleKeys,\n    onClose: handleClose,\n    className: \"solicitarTurnoDialog\",\n    children: /*#__PURE__*/_jsx(DialogContent, {\n      children: /*#__PURE__*/_jsxs(Card, {\n        style: {\n          marginTop: \"10px\",\n          marginBottom: \"10px\"\n        },\n        className: \"proxTurnoCard\",\n        children: [/*#__PURE__*/_jsxs(CardHeader, {\n          className: \"dialogCardHeader\",\n          style: {\n            fontSize: \"1.5rem\",\n            padding: \"8px\",\n            textAlign: \"center\"\n          },\n          color: \"primary\",\n          children: [/*#__PURE__*/_jsx(CheckCircleIcon, {\n            className: \"dialogCardHeader\",\n            style: {\n              fontSize: \"1.5rem\"\n            }\n          }), \" \\xBFDesea confirmar la solicitud de este turno?\"]\n        }), /*#__PURE__*/_jsxs(CardBody, {\n          style: {\n            paddingTop: 0\n          },\n          children: [/*#__PURE__*/_jsxs(List, {\n            children: [/*#__PURE__*/_jsxs(ListItem, {\n              children: [/*#__PURE__*/_jsx(ListItemAvatar, {\n                children: /*#__PURE__*/_jsxs(\"label\", {\n                  className: classes.colorPrimary,\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    style: {\n                      fontSize: '20px'\n                    },\n                    children: /*#__PURE__*/_jsx(\"b\", {\n                      children: \"13/6\"\n                    })\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '13px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"17:40\"\n                    }), \"hs\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(ListItemText, {\n                primary: /*#__PURE__*/_jsxs(\"label\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Especialidad: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.especialidad\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Lugar de Atenci\\xF3n: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.lugar\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Fecha: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.fecha\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Profesional: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.profesional\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"label\", {\n                    style: {\n                      fontSize: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"b\", {\n                      children: \"Motivo: \"\n                    }), /*#__PURE__*/_jsx(\"label\", {\n                      style: {\n                        fontSize: '14px'\n                      },\n                      children: turno.motivo\n                    })]\n                  }), /*#__PURE__*/_jsx(\"br\", {})]\n                })\n              })]\n            }), /*#__PURE__*/_jsx(\"hr\", {})]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              display: \"flex\",\n              justifyContent: \"space-evenly\",\n              marginBottom: \"8px\"\n            },\n            children: [/*#__PURE__*/_jsx(Button, {\n              onClick: handleClose,\n              color: \"secondaryOutlined\",\n              children: \"Cancelar\"\n            }), /*#__PURE__*/_jsx(Button, {\n              onClick: handleConfirm,\n              color: \"primary\",\n              children: \"Confirmar\"\n            })]\n          })]\n        })]\n      })\n    })\n  });\n}\n\nGestionTurnos.layout = Admin;\nexport default GestionTurnos;","map":null,"metadata":{},"sourceType":"module"}